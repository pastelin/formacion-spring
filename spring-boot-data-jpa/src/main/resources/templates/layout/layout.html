<!DOCTYPE html>
<html
	lang="en"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
>
	<head th:fragment="head">
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title th:text=" 'Spring Boot: MVC + Thymeleaf + Data JPA - ' + ${titulo}"></title>
		<link rel="stylesheet" th:href="@{/css/jquery-ui.min.css}" />
		<link rel="stylesheet" th:href="@{/css/bootstrap.min.css}" />
		<link rel="stylesheet" th:href="@{/css/estilos.css}" />
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Open+Sans&family=PT+Sans:wght@400;700&display=swap"
			rel="stylesheet"
		/>
	</head>
	<body>
		<header th:fragment="header">
			<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
				<div class="container-fluid">
					<a class="navbar-brand navbar__titulo" href="#">Spring Boot</a>
					<button
						class="navbar-toggler"
						type="button"
						data-bs-toggle="collapse"
						data-bs-target="#navbarNavAltMarkup"
						aria-controls="navbarNavAltMarkup"
						aria-expanded="false"
						aria-label="Toggle navigation"
					>
						<span class="navbar-toggler-icon"></span>
					</button>
					<div class="collapse navbar-collapse" id="navbarNavAltMarkup">
						<div class="navbar-nav">
							<a class="nav-link nav__titulo active" aria-current="page" href="#"
								>Home</a
							>
							<a class="nav-link nav__titulo" th:href="@{/listar}">Clientes</a>
						</div>
						<div class="navbar-nav navbar-right">
							<a
								sec:authorize="!isAuthenticated()"
								class="btn btn-outline-primary"
								th:href="@{/login}"
							>
								Sign In
							</a>

							<div sec:authorize="isAuthenticated()" class="dropdown">
								<a
									class="btn btn-outline-primary dropdown-toggle"
									href="#"
									role="button"
									id="dropdownMenuLink"
									data-bs-toggle="dropdown"
									aria-expanded="false"
								>
									<span sec:authentication="name"></span>
								</a>

								<ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
									<form id="logoutForm" th:action="@{/logout}" method="post">
										<button
											class="dropdown-item"
											onclick="document.getElementById('logoutForm').submit();"
											type="submit"
										>
											Sign Out
										</button>
										<input
											type="hidden"
											th:name="${_csrf.parameterName}"
											th:value="${_csrf.token}"
										/>
									</form>
								</ul>
							</div>
						</div>
					</div>
				</div>
			</nav>

			<div class="alert alert-success" th:if="${success != null}" th:text="${success}"></div>
			<div class="alert alert-danger" th:if="${error != null}" th:text="${error}"></div>
			<div class="alert alert-warning" th:if="${warning != null}" th:text="${warning}"></div>
			<div class="alert alert-info" th:if="${info != null}" th:text="${info}"></div>
		</header>

		<div class="container"></div>

		<footer th:fragment="footer" class="container">
			<div class="row">
				<div class="col contenedor__footer">
					<hr />

					<div class="imagen__footer">
						<img th:src="@{/images/spring.png}" alt="Spring logo" />
					</div>

					<p sec:authorize="isAuthenticated()">
						Usuario logueado: <span sec:authentication="name"></span> | Roles:
						<span sec:authentication="principal.authorities"></span>
					</p>

					<p>
						Powered by <a href="https://spring.io/projects/spring-data">Spring Data</a>
					</p>
				</div>
			</div>

			<script th:src="@{/js/jquery-3.6.0.min.js}"></script>
			<script th:src="@{/js/jquery-ui.min.js}"></script>
			<script th:src="@{/js/bootstrap.bundle.min.js}"></script>
			<!-- <script th:src="@{/js/autocomplete-productos.js}"></script> -->
		</footer>
	</body>
</html>
